{"version":3,"sources":["webpack:///src/components/yuer-middle/yuer-middle-rotchart.vue","webpack:///./src/components/yuer-middle/yuer-middle-rotchart.vue?2c94","webpack:///./src/components/yuer-middle/yuer-middle-rotchart.vue"],"names":["yuer_middle_rotchart","data","index","ortouchX","entouchX","orileft","chartid","Clength","dots","mounted","this","autoChart","destroyed","clearInterval","computed","pics","banners","$store","state","push","unshift","methods","setInterval","callback","$refs","middleRotchare","style","transition","toNextPic","_this","left","setTimeout","jumpToPic","n","touchChart","e","id","touches","clientX","offsetLeft","touchmove","tempX","shortTouch","dragTouch","touchend","console","log","yuer_middle_yuer_middle_rotchart","render","_vm","_h","$createElement","_c","_self","attrs","ref","staticStyle","_l","img","i","key","staticClass","src","undefined","imageUrl","alt","on","touchstart","$event","_v","dot","class","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/32.4e914ed300985d219d3b.js","sourcesContent":["<template>\r\n<div id=\"yuer-middle-pics\">\r\n    <div id=\"middle-rotchare\" ref=\"middleRotchare\" style=\"left:-100%;\">     \r\n        <img v-for=\"(img,i) in pics\"  :key=\"i\"  :src=\"img !== undefined ? img.imageUrl :'' \" alt=\"\" class=\"rotchartPic\" @touchstart=\"touchChart($event,i+1)\" @touchmove=\"touchmove\" @touchend=\"touchend\">\r\n   </div>\r\n    <div id=\"rotchare-dots\">\r\n        <span v-for=\"(dot,i) in dots\" :key=\"i\" :class=\" index === dot ? 'focus':''\"></span>\r\n    </div> \r\n</div>\r\n</template>\r\n\r\n<script>\r\n   export default {\r\n       data () {\r\n           return {\r\n               //图片数组序号\r\n               index:1,              \r\n               //touchmove开始时的点击位置\r\n               ortouchX:0,\r\n               //touchmove结束时的点击位置，但是如果没有拖拽的话，这个值为0\r\n               entouchX:0,\r\n               //拖动前的位置\r\n               orileft:0,\r\n               //定时器的id\r\n               chartid:\"\",\r\n               //轮播图长度\r\n               Clength:9,\r\n               //\r\n               dots:[1,2,3,4,5,6,7,8,9]\r\n           }\r\n       },\r\n        \r\n       mounted () {\r\n            //开启定时器\r\n            this.autoChart()\r\n            \r\n       },\r\n       destroyed () {\r\n           //组件销毁之前，清除轮播图定时器\r\n            clearInterval(this.chartid)\r\n       },\r\n       computed: {\r\n            pics(){\r\n                let banners = this.$store.state.banners\r\n                banners.push(banners[0])\r\n                banners.unshift(banners[this.Clength-1])\r\n                return banners\r\n            }\r\n       },\r\n       methods: {\r\n           //设置定时器\r\n            autoChart(){\r\n                this.chartid = setInterval(this.callback, 3000)\r\n            },\r\n\r\n            //定时器回调函数\r\n            callback(){\r\n                this.$refs.middleRotchare.style.transition = '1s'\r\n                    if( this.index < this.Clength + 1){\r\n                        this.index ++\r\n                    }else{\r\n                        this.index = 1\r\n                    }\r\n                    \r\n                //滚动到下一张图\r\n                this.toNextPic()\r\n\r\n                //滚动到第1张图时，清除定时器，不然在第一张图会等待两倍的事件，(最后一张占位图的等待时间加上第一张图的等待时间)\r\n                if(this.index == 1){\r\n                    clearInterval(this.chartid)\r\n                    this.chartid = setInterval(this.callback,0)\r\n                }else{\r\n                    clearInterval(this.chartid)\r\n                    this.chartid = setInterval(this.callback,3000)\r\n                }\r\n                        \r\n            },\r\n            \r\n            //滚动到下一张图\r\n            toNextPic(){\r\n                this.$refs.middleRotchare.style.left = `-${100*(this.index)}% ` \r\n                //当图片轮播到位于两边的占位图片时，等1s后（等待过渡动画执行完），跳到占位图片对应的原本的位置\r\n                if( this.index == this.Clength + 1 ){\r\n                    setTimeout(()=>{\r\n                        this.jumpToPic(1)\r\n                    },1000) \r\n                }else if(this.index == 0){\r\n                    setTimeout(()=>{\r\n                        this.jumpToPic(this.Clength)\r\n                    },1000) \r\n                }\r\n            },\r\n\r\n            //跳到第一张或最后一张图片\r\n            jumpToPic(n){\r\n                this.$refs.middleRotchare.style.transition = '0s'\r\n                this.$refs.middleRotchare.style.left = `-${100*n}% ` \r\n                this.index = n \r\n            },\r\n        \r\n            //触摸事件开始\r\n            touchChart(e,id){\r\n            //判断点击时长，如果长时间点击就触发拖拽事件，短时间点击就触发点击事件\r\n                //触发点击事件后，必须先把this.istouchend变为false 因为这时一个新的事件开始了。还未执行touchend，所以要保证this.istouchend为false\r\n                //不在这里设置的话，上一次事件结束之时执行的 touchend() 会把this.istouchend变为true，那么判断就始终在true里了\r\n                \r\n                /*\r\n                    这个判断存在的目的是，当手动拖动到位于div两边的占位图片时，再次拖动时，瞬间回到占位图对应的图片原本的位置，而不时等1s\r\n                    id为index+1,表示图片的序号\r\n                */\r\n                if(id == this.Clength + 2){\r\n                    this.jumpToPic(1)\r\n                }\r\n                else if(id == 1){\r\n                    this.jumpToPic(this.Clength)\r\n                }else{\r\n                     this.$refs.middleRotchare.style.transition = '1s'\r\n                }\r\n\r\n\r\n                //获取触摸时的位置，用于判断是否进行了拖动\r\n                this.entouchX = this.ortouchX = e.touches[0].clientX\r\n                //获取轮播图移动前的left值\r\n                this.orileft = this.$refs.middleRotchare.offsetLeft\r\n                //去掉拖拽时的过渡效果\r\n                this.$refs.middleRotchare.style.transition = '0s'\r\n\r\n                //清除定时器，取消自动轮播\r\n                clearInterval(this.chartid)\r\n                \r\n            },\r\n\r\n            //触摸移动事件\r\n            touchmove(e){\r\n                let tempX = this.orileft + this.entouchX - this.ortouchX\r\n                this.entouchX = e.touches[0].clientX\r\n                this.$refs.middleRotchare.style.left = tempX + 'px'\r\n            },\r\n\r\n            //点击触摸事件\r\n            shortTouch(e){\r\n\r\n            },\r\n            //拖拽事件\r\n            dragTouch(){  \r\n                //判断是向左拖动还是向右拖动\r\n                let oriindex = this.index\r\n                // this.$refs.middleRotchare.style.transition = '1s'\r\n                //向右拖动\r\n                if(this.entouchX > this.ortouchX ){\r\n                    if( this.index <= 0 ){\r\n                        this.index = this.Clength\r\n                    }else{\r\n                        this.index--\r\n                    }\r\n                }\r\n                //向左拖动\r\n                else{\r\n                    if( this.index < this.Clength + 1 ){\r\n                       this.index ++\r\n                    }else{\r\n                        this.index = 1\r\n                    }\r\n                    \r\n                }\r\n                this.toNextPic()\r\n                \r\n            },\r\n            //触摸事件结束\r\n            touchend(e){\r\n                /*\r\n                    这个判断必须在touchmouve之后进行，不能再touchstart里进行\r\n\r\n                    如果再touchstart里执行的话，会在判断为拖拽（即长时间点击）后执行拖拽时的动作。\r\n                    但点击的一瞬间，利用定时器判断为拖拽后，会立即执行函数。而不是在move之后才去执行函数，\r\n                    这就导致还没有执行move事件，this.entouchX的值不能正确的获取到，还是初始值\r\n                    \r\n                    这里不用定时器来判断是拖拽还是点击，使用定时器根据点击时间长短判断的话，要注意在touchend事件中时设置标记istouchend,根据istouchend为true的发生时间\r\n                    判断touch时间长短，并且在时间touchstart中进行判断前，要注意把先把istouchend初始化为false。否则的化，第一次touchend结束后，istouchend始终为true\r\n                    不能再touchstart事件结束时设置istouchend为false，因为touchend在touchstart之后，它执行后就又把istouchend变为true了。\r\n                */\r\n                if(this.entouchX !== this.ortouchX ){\r\n                    this.dragTouch()\r\n                    this.$refs.middleRotchare.style.transition = '1s'              \r\n                }else{\r\n                    console.log(\"点击了\");\r\n                }\r\n\r\n                //触摸事件结束。恢复定时器\r\n                this.autoChart()\r\n            },\r\n            //删除数组的第一个元素，并添加到尾部，把数组变成一个循环，让轮播图头尾相连      \r\n       }\r\n   }\r\n</script>\r\n\r\n<style>\r\n@import '../../css/yuer-middle-rotchart.css';\r\n.focus{\r\n    background: red !important;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/yuer-middle/yuer-middle-rotchart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"yuer-middle-pics\"}},[_c('div',{ref:\"middleRotchare\",staticStyle:{\"left\":\"-100%\"},attrs:{\"id\":\"middle-rotchare\"}},_vm._l((_vm.pics),function(img,i){return _c('img',{key:i,staticClass:\"rotchartPic\",attrs:{\"src\":img !== undefined ? img.imageUrl :'',\"alt\":\"\"},on:{\"touchstart\":function($event){return _vm.touchChart($event,i+1)},\"touchmove\":_vm.touchmove,\"touchend\":_vm.touchend}})}),0),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"rotchare-dots\"}},_vm._l((_vm.dots),function(dot,i){return _c('span',{key:i,class:_vm.index === dot ? 'focus':''})}),0)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0c8400fe\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/yuer-middle/yuer-middle-rotchart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0c8400fe\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./yuer-middle-rotchart.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./yuer-middle-rotchart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./yuer-middle-rotchart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0c8400fe\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./yuer-middle-rotchart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/yuer-middle/yuer-middle-rotchart.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}